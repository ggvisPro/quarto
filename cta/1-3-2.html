<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>临床思维能力测评系统（CTA） - 体格检查 (AI交互版)</title>
    
    <script src="https://cdn.tailwindcss.com/3.4.3"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #aaa; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #888; }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div class="flex h-screen">
        <aside class="w-64 bg-gray-800 text-white flex flex-col">
            <div class="h-16 flex items-center justify-center border-b border-gray-700">
                <h1 class="text-xl font-bold">CTA测评系统</h1>
            </div>
            <nav class="flex-1 px-4 py-4 overflow-y-auto">
                <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">信息收集站</h2>
                <ul>
                    <li class="mb-1"><a href="#" class="flex items-center px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-md"><i class="fa-solid fa-notes-medical w-6 h-6 mr-3"></i><span>病史采集</span></a></li>
                    <li class="mb-1"><a href="#" class="flex items-center px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-md"><i class="fa-solid fa-file-waveform w-6 h-6 mr-3"></i><span>初步诊断</span></a></li>
                    <li class="mb-1"><a href="#" class="flex items-center px-3 py-2 text-sm bg-gray-900/50 rounded-md font-medium"><i class="fa-solid fa-stethoscope w-6 h-6 mr-3"></i><span>体格检查</span></a></li>
                    <li class="mb-1"><a href="#" class="flex items-center px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-md"><i class="fa-solid fa-lightbulb w-6 h-6 mr-3"></i><span>诊断与鉴别诊断</span></a></li>
                </ul>
                <div class="mt-6"><h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">病情分析站</h2><ul></ul></div>
                <div class="mt-6"><h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">临床诊疗站</h2><ul></ul></div>
                <div class="mt-6"><h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">动态决策站</h2><ul></ul></div>
            </nav>
        </aside>

        <main class="flex-1 flex flex-col">
            <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6">
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">第一站：信息收集 - 体格检查</h2>
                    <p class="text-sm text-gray-500">请通过与AI考官对话，完成您认为必要的体格检查。</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm font-medium text-gray-600"><i class="fa-regular fa-clock mr-2"></i><span>剩余时间: </span><span class="font-mono text-red-600">10:15</span></div>
                </div>
            </header>

            <div class="flex-1 p-6 flex flex-col bg-gray-100">
                <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4 text-sm text-blue-800">
                    <i class="fa-solid fa-circle-info mr-2"></i><strong>提醒：</strong>患者主诉“上腹痛1周”，您的初步诊断为“急性胃炎？消化性溃疡？”
                </div>
                
                <div class="flex-1 bg-white rounded-lg shadow-md p-4 overflow-y-auto hover:shadow-lg transition-shadow duration-300" id="chat-window">
                    <div class="flex items-start mb-4">
                        <div class="w-10 h-10 rounded-full bg-indigo-500 text-white flex items-center justify-center mr-3 flex-shrink-0">
                            <i class="fa-solid fa-user-gear"></i>
                        </div>
                        <div class="bg-gray-200 p-3 rounded-lg max-w-lg">
                            <p class="text-sm text-gray-800">您好，我是本次测评的AI考官。请通过文字指令，对病人进行体格检查。您可以从测量生命体征开始，或直接进行您认为必要的专项检查。</p>
                        </div>
                    </div>
                </div>

                <div class="mt-4">
                     <form id="exam-form" class="flex items-center space-x-3">
                        <input type="text" id="exam-input" placeholder="请输入检查指令，如“腹部触诊”..." class="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition">
                        <button type="submit" class="bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-transform duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                            <i class="fa-solid fa-paper-plane mr-2"></i>执行
                        </button>
                    </form>
                    <div class="mt-2 flex items-center space-x-2">
                        <span class="text-xs text-gray-500">AI建议:</span>
                        <button class="suggestion-chip bg-yellow-200 text-yellow-800 text-xs px-2.5 py-1 rounded-full hover:bg-yellow-300">腹部检查</button>
                        <button class="suggestion-chip bg-gray-200 text-gray-800 text-xs px-2.5 py-1 rounded-full hover:bg-gray-300">生命体征</button>
                        <button class="suggestion-chip bg-gray-200 text-gray-800 text-xs px-2.5 py-1 rounded-full hover:bg-gray-300">心脏听诊</button>
                    </div>
                </div>
                 <div class="mt-6 text-right">
                    <button class="bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 transition-transform duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2">
                        完成检查，进入诊断<i class="fa-solid fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </main>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const examForm = document.getElementById('exam-form');
        const examInput = document.getElementById('exam-input');
        const chatWindow = document.getElementById('chat-window');
        const suggestionChips = document.querySelectorAll('.suggestion-chip');

        // 模拟AI知识库
        const aiKnowledgeBase = {
            '血压': '血压：125/80 mmHg。',
            '体温': '体温：36.8℃。',
            '脉搏': '脉搏：82次/分，节律规整。',
            '呼吸': '呼吸：18次/分。',
            '生命体征': '体温36.8℃，脉搏82次/分，呼吸18次/分，血压125/80 mmHg。',
            '腹部视诊': '腹部平坦，未见胃肠型及蠕动波，未见腹壁静脉曲张。',
            '腹部听诊': '肠鸣音正常，约4-5次/分，未闻及血管杂音。',
            '腹部叩诊': '全腹呈鼓音，肝浊音界存在，无移动性浊音。',
            '腹部触诊': '腹部柔软，上腹部有轻度压痛，无反跳痛及肌紧张。',
            '腹部检查': '视诊：腹部平坦，未见异常。听诊：肠鸣音正常。叩诊：呈鼓音。触诊：上腹部有轻度压痛，无反跳痛。',
            '心脏听诊': '心率82次/分，节律齐，各瓣膜听诊区未闻及病理性杂音。',
            '肺部听诊': '双肺呼吸音清，未闻及干湿性啰音。'
        };

        function handleExamRequest(command) {
            const commandText = command.trim();
            if (commandText === '') return;

            // 1. 显示考生的指令
            const userMessageElement = document.createElement('div');
            userMessageElement.className = 'flex items-start justify-end mb-4';
            userMessageElement.innerHTML = `
                <div class="bg-indigo-600 text-white p-3 rounded-lg max-w-lg">
                    <p class="text-sm">执行检查：${commandText}</p>
                </div>
                <div class="w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center ml-3 flex-shrink-0">
                    <i class="fa-solid fa-user-doctor"></i>
                </div>`;
            chatWindow.appendChild(userMessageElement);

            // 2. 模拟AI处理并回复
            setTimeout(() => {
                let aiResponse = '无法识别该指令，请使用更标准的医学术语，或尝试我们的建议。';
                for (const keyword in aiKnowledgeBase) {
                    if (commandText.includes(keyword)) {
                        aiResponse = aiKnowledgeBase[keyword];
                        break;
                    }
                }
                
                const aiMessageElement = document.createElement('div');
                aiMessageElement.className = 'flex items-start mb-4';
                aiMessageElement.innerHTML = `
                    <div class="w-10 h-10 rounded-full bg-indigo-500 text-white flex items-center justify-center mr-3 flex-shrink-0">
                        <i class="fa-solid fa-user-gear"></i>
                    </div>
                    <div class="bg-gray-200 p-3 rounded-lg max-w-lg">
                        <p class="text-sm text-gray-800"><strong>结果：</strong>${aiResponse}</p>
                    </div>`;
                chatWindow.appendChild(aiMessageElement);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }, 800);
            
            examInput.value = '';
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        examForm.addEventListener('submit', function(e) {
            e.preventDefault();
            handleExamRequest(examInput.value);
        });

        suggestionChips.forEach(chip => {
            chip.addEventListener('click', () => {
                handleExamRequest(chip.textContent);
            });
        });
    });
</script>
</body>
</html>
