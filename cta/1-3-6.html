<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>临床思维能力测评系统 - 体格检查</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- 自定义样式 -->
    <style>
        /* 滚动条样式 */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* 按钮悬停效果 */
        .btn-hover {
            transition: all 0.3s ease;
        }
        .btn-hover:hover {
            transform: scale(1.05);
        }
        
        /* 卡片悬停效果 */
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        /* 人体图交互区域 */
        .body-part {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .body-part:hover {
            fill: #3B82F6;
            opacity: 0.8;
        }
        .body-part.active {
            fill: #059669;
            opacity: 0.9;
        }
        
        /* 检查选项弹出框 */
        .exam-popup {
            display: none;
            position: absolute;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            padding: 12px;
            z-index: 50;
            min-width: 200px;
        }
        .exam-popup.show {
            display: block;
        }
        
        /* 检查项目标签 */
        .exam-tag {
            transition: all 0.2s ease;
        }
        .exam-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- 左侧导航栏 -->
        <aside class="w-64 bg-white shadow-lg">
            <div class="p-6">
                <h1 class="text-xl font-bold text-gray-800 mb-8">
                    <i class="fas fa-stethoscope text-blue-600 mr-2"></i>
                    临床思维能力测评系统
                </h1>
                
                <!-- 导航菜单 -->
                <nav class="space-y-2">
                    <!-- 信息收集站 -->
                    <div>
                        <div class="flex items-center justify-between p-3 text-gray-700 rounded-lg bg-blue-50">
                            <span class="font-medium">
                                <i class="fas fa-clipboard-list mr-2"></i>
                                信息收集站
                            </span>
                            <i class="fas fa-chevron-down text-sm"></i>
                        </div>
                        <div class="ml-4 mt-2 space-y-1">
                            <a href="#" class="block p-2 pl-8 text-sm text-gray-600 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-user-md mr-2"></i>病史采集
                            </a>
                            <a href="#" class="block p-2 pl-8 text-sm text-gray-600 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-diagnoses mr-2"></i>初步诊断
                            </a>
                            <a href="#" class="block p-2 pl-8 text-sm text-white bg-blue-600 rounded-lg">
                                <i class="fas fa-hand-holding-medical mr-2"></i>体格检查
                            </a>
                            <a href="#" class="block p-2 pl-8 text-sm text-gray-600 hover:bg-gray-100 rounded-lg">
                                <i class="fas fa-notes-medical mr-2"></i>诊断与鉴别诊断
                            </a>
                        </div>
                    </div>
                    
                    <!-- 其他站点（折叠状态） -->
                    <div class="pt-4 space-y-2">
                        <div class="flex items-center justify-between p-3 text-gray-700 rounded-lg hover:bg-gray-100 cursor-pointer">
                            <span class="font-medium">
                                <i class="fas fa-chart-line mr-2"></i>
                                病情分析站
                            </span>
                            <i class="fas fa-chevron-right text-sm"></i>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 text-gray-700 rounded-lg hover:bg-gray-100 cursor-pointer">
                            <span class="font-medium">
                                <i class="fas fa-briefcase-medical mr-2"></i>
                                临床诊疗站
                            </span>
                            <i class="fas fa-chevron-right text-sm"></i>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 text-gray-700 rounded-lg hover:bg-gray-100 cursor-pointer">
                            <span class="font-medium">
                                <i class="fas fa-sync-alt mr-2"></i>
                                动态决策站
                            </span>
                            <i class="fas fa-chevron-right text-sm"></i>
                        </div>
                    </div>
                </nav>
            </div>
            
            <!-- 底部信息 -->
            <div class="absolute bottom-0 left-0 right-0 p-6 border-t">
                <div class="flex items-center text-sm text-gray-600">
                    <i class="fas fa-user-circle text-2xl mr-3"></i>
                    <div>
                        <p class="font-medium">考生：ggvis</p>
                        <p class="text-xs">2025-06-26</p>
                    </div>
                </div>
            </div>
        </aside>
        
        <!-- 主内容区 -->
        <main class="flex-1 overflow-hidden">
            <!-- 顶部栏 -->
            <header class="bg-white shadow-sm px-8 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">体格检查</h2>
                        <p class="text-sm text-gray-600 mt-1">请点击人体模型相应部位进行检查</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-sm text-gray-600">
                            <i class="fas fa-clock mr-2"></i>
                            剩余时间：<span class="font-bold text-blue-600">12:30</span>
                        </div>
                        <button class="btn-hover bg-green-500 text-white px-4 py-2 rounded-lg text-sm">
                            <i class="fas fa-check-circle mr-2"></i>
                            完成检查
                        </button>
                    </div>
                </div>
            </header>
            
            <!-- 体格检查主界面 -->
            <div class="p-6 h-full overflow-auto custom-scrollbar">
                <div class="grid grid-cols-12 gap-6">
                    <!-- 左侧：人体模型 -->
                    <div class="col-span-5">
                        <!-- 人体模型卡片 -->
                        <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
                            <h3 class="font-bold text-gray-800 mb-4">
                                <i class="fas fa-male text-blue-600 mr-2"></i>
                                体格检查部位选择
                            </h3>
                            
                            <!-- 人体SVG图 -->
                            <div class="relative bg-gray-50 rounded-lg p-8" id="bodyContainer">
                                <svg viewBox="0 0 200 400" class="w-full h-96">
                                    <!-- 头部 -->
                                    <g class="body-part" data-part="head" data-name="头部">
                                        <circle cx="100" cy="50" r="30" fill="#FFE0BD" stroke="#666" stroke-width="2"/>
                                    </g>
                                    
                                    <!-- 颈部 -->
                                    <g class="body-part" data-part="neck" data-name="颈部">
                                    </g>
                                    
                                    <!-- 胸部 -->
                                    <g class="body-part" data-part="chest" data-name="胸部">
                                        <rect x="70" y="90" width="60" height="90" fill="#FFE0BD" stroke="#666" stroke-width="2"/>
                                        <!-- 心脏位置标记 -->
                                        <circle cx="110" cy="120" r="15" fill="#FF6B6B" opacity="0.3" class="body-part" data-part="heart" data-name="心脏"/>
                                    </g>
                                    
                                    <!-- 腹部 -->
                                    <g class="body-part" data-part="abdomen" data-name="腹部">
                                        <rect x="70" y="180" width="60" height="80" fill="#FFE0BD" stroke="#666" stroke-width="2"/>
                                    </g>
                                    
                                    <!-- 双臂 -->
                                    <g class="body-part" data-part="left-arm" data-name="左臂">
                                        <rect x="30" y="90" width="30" height="120" fill="#FFE0BD" stroke="#666" stroke-width="2"/>
                                    </g>
                                    <g class="body-part" data-part="right-arm" data-name="右臂">
                                        <rect x="140" y="90" width="30" height="120" fill="#FFE0BD" stroke="#666" stroke-width="2"/>
                                    </g>
                                    
                                    <!-- 双腿 -->
                                    <g class="body-part" data-part="left-leg" data-name="左腿">
                                        <rect x="75" y="260" width="20" height="120" fill="#FFE0BD" stroke="#666" stroke-width="2"/>
                                    </g>
                                    <g class="body-part" data-part="right-leg" data-name="右腿">
                                        <rect x="105" y="260" width="20" height="120" fill="#FFE0BD" stroke="#666" stroke-width="2"/>
                                    </g>
                                </svg>
                                
                                <!-- 检查选项弹出框 -->
                                <div id="examPopup" class="exam-popup">
                                    <h4 class="font-bold text-gray-800 mb-3 text-sm">
                                        <span id="popupTitle">选择检查项目</span>
                                    </h4>
                                    <div id="examOptions" class="space-y-2">
                                        <!-- 动态填充检查选项 -->
                                    </div>
                                </div>
                            </div>
                            
                            <p class="text-sm text-gray-600 mt-4 text-center">
                                <i class="fas fa-hand-pointer mr-2"></i>
                                点击身体部位选择具体检查项目
                            </p>
                        </div>
                        
                        <!-- 常用检查快捷方式 -->
                        <div class="bg-white rounded-lg shadow-lg p-6 mt-6 card-hover">
                            <h3 class="font-bold text-gray-800 mb-4">
                                <i class="fas fa-star text-yellow-500 mr-2"></i>
                                常用检查项目
                            </h3>
                            <div class="grid grid-cols-2 gap-3">
                                <button class="exam-tag p-3 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium">
                                    <i class="fas fa-heartbeat mr-2"></i>心率测量
                                </button>
                                <button class="exam-tag p-3 bg-green-50 text-green-700 rounded-lg text-sm font-medium">
                                    <i class="fas fa-tachometer-alt mr-2"></i>血压测量
                                </button>
                                <button class="exam-tag p-3 bg-purple-50 text-purple-700 rounded-lg text-sm font-medium">
                                    <i class="fas fa-stethoscope mr-2"></i>心肺听诊
                                </button>
                                <button class="exam-tag p-3 bg-orange-50 text-orange-700 rounded-lg text-sm font-medium">
                                    <i class="fas fa-hand-paper mr-2"></i>腹部触诊
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 右侧：检查结果 -->
                    <div class="col-span-7">
                        <!-- 检查进度 -->
                        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <h3 class="font-bold text-gray-800 mb-4">
                                <i class="fas fa-tasks text-green-500 mr-2"></i>
                                检查进度
                            </h3>
                            <div class="flex items-center justify-between text-sm">
                                <div class="flex-1">
                                    <div class="flex justify-between mb-2">
                                        <span class="text-gray-600">已完成检查</span>
                                        <span class="font-medium">4/10 项</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 40%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 检查结果列表 -->
                        <div class="bg-white rounded-lg shadow-lg p-6">
                            <h3 class="font-bold text-gray-800 mb-4">
                                <i class="fas fa-clipboard-check text-green-500 mr-2"></i>
                                检查结果记录
                            </h3>
                            
                            <!-- 检查结果列表 -->
                            <div class="space-y-4" id="examResults">
                                <!-- 示例结果 -->
                                <div class="border-l-4 border-blue-500 bg-blue-50 p-4 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-medium text-gray-800">
                                            <i class="fas fa-heart text-blue-600 mr-2"></i>
                                            生命体征检查
                                        </h4>
                                        <span class="text-xs text-gray-500">10:35 AM</span>
                                    </div>
                                    <div class="grid grid-cols-2 gap-3 text-sm">
                                        <div>
                                            <span class="text-gray-600">血压：</span>
                                            <span class="font-medium">120/80 mmHg</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">心率：</span>
                                            <span class="font-medium">72 次/分</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">呼吸：</span>
                                            <span class="font-medium">16 次/分</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">体温：</span>
                                            <span class="font-medium">36.5°C</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 更多检查结果将动态添加到这里 -->
                            </div>
                            
                            <!-- 空状态提示 -->
                            <div id="emptyState" class="hidden text-center py-8 text-gray-500">
                                <i class="fas fa-clipboard text-4xl mb-3"></i>
                                <p>暂无检查结果，请点击人体模型开始检查</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- JavaScript交互 -->
    <script>
        // 检查项目配置
        const examOptions = {
            head: [
                { name: '瞳孔反射检查', icon: 'eye', result: '双侧瞳孔等大等圆，对光反射灵敏' },
                { name: '眼底检查', icon: 'eye-dropper', result: '视网膜无异常，视盘边界清晰' },
                { name: '耳部检查', icon: 'deaf', result: '外耳道通畅，鼓膜完整' },
                { name: '口腔检查', icon: 'teeth', result: '口腔黏膜无异常，咽部无充血' }
            ],
            neck: [
                { name: '甲状腺触诊', icon: 'hand-paper', result: '甲状腺大小正常，质地软，无结节' },
                { name: '颈动脉听诊', icon: 'stethoscope', result: '颈动脉无杂音' },
                { name: '淋巴结检查', icon: 'circle', result: '颈部淋巴结未触及肿大' }
            ],
            chest: [
                { name: '胸廓视诊', icon: 'eye', result: '胸廓对称，呼吸运动正常' },
                { name: '肺部听诊', icon: 'lungs', result: '双肺呼吸音清，未闻及干湿啰音' },
                { name: '心界叩诊', icon: 'hand-rock', result: '心界不大' }
            ],
            heart: [
                { name: '心音听诊', icon: 'heartbeat', result: '心率72次/分，律齐，各瓣膜听诊区未闻及杂音' },
                { name: '心尖搏动', icon: 'hand-point-up', result: '心尖搏动位于第5肋间锁骨中线内0.5cm' },
                { name: '心电图', icon: 'wave-square', result: '窦性心律，心电图未见异常' }
            ],
            abdomen: [
                { name: '腹部视诊', icon: 'eye', result: '腹部平坦，无胃肠型及蠕动波' },
                { name: '腹部触诊', icon: 'hand-paper', result: '腹软，无压痛，肝脾未触及' },
                { name: '腹部叩诊', icon: 'hand-rock', result: '肝浊音界正常，移动性浊音阴性' },
                { name: '腹部听诊', icon: 'stethoscope', result: '肠鸣音正常，4-5次/分' }
            ],
            'left-arm': [
                { name: '肌力测试', icon: 'dumbbell', result: '左上肢肌力5级' },
                { name: '反射检查', icon: 'bolt', result: '肱二头肌反射正常' },
                { name: '血压测量', icon: 'tachometer-alt', result: '左臂血压 120/80 mmHg' }
            ],
            'right-arm': [
                { name: '肌力测试', icon: 'dumbbell', result: '右上肢肌力5级' },
                { name: '反射检查', icon: 'bolt', result: '肱二头肌反射正常' },
                { name: '血压测量', icon: 'tachometer-alt', result: '右臂血压 122/82 mmHg' }
            ],
            'left-leg': [
                { name: '肌力测试', icon: 'dumbbell', result: '左下肢肌力5级' },
                { name: '膝反射', icon: 'bolt', result: '左侧膝反射正常' },
                { name: '足背动脉搏动', icon: 'heartbeat', result: '左足背动脉搏动良好' }
            ],
            'right-leg': [
                { name: '肌力测试', icon: 'dumbbell', result: '右下肢肌力5级' },
                { name: '膝反射', icon: 'bolt', result: '右侧膝反射正常' },
                { name: '足背动脉搏动', icon: 'heartbeat', result: '右足背动脉搏动良好' }
            ]
        };
        
        // 已完成的检查记录
        let completedExams = [];
        
        // 人体部位点击事件
        document.querySelectorAll('.body-part').forEach(part => {
            part.addEventListener('click', function(e) {
                e.stopPropagation();
                const partName = this.getAttribute('data-part');
                const displayName = this.getAttribute('data-name');
                const rect = this.getBoundingClientRect();
                const containerRect = document.getElementById('bodyContainer').getBoundingClientRect();
                
                // 显示检查选项弹窗
                showExamOptions(partName, displayName, {
                    x: rect.left - containerRect.left + rect.width / 2,
                    y: rect.top - containerRect.top + rect.height / 2
                });
            });
        });
        
        // 显示检查选项
        function showExamOptions(part, displayName, position) {
            const popup = document.getElementById('examPopup');
            const optionsContainer = document.getElementById('examOptions');
            const title = document.getElementById('popupTitle');
            
            // 设置标题
            title.textContent = `${displayName}检查项目`;
            
            // 清空并填充选项
            optionsContainer.innerHTML = '';
            const options = examOptions[part] || [];
            
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'w-full text-left p-2 hover:bg-gray-100 rounded flex items-center text-sm';
                button.innerHTML = `
                    <i class="fas fa-${option.icon} text-blue-600 mr-2"></i>
                    <span>${option.name}</span>
                `;
                button.onclick = () => performExam(part, displayName, option);
                optionsContainer.appendChild(button);
            });
            
            // 设置弹窗位置
            popup.style.left = position.x + 'px';
            popup.style.top = position.y + 'px';
            popup.classList.add('show');
        }
        
        // 执行检查
        function performExam(part, displayName, exam) {
            // 关闭弹窗
            document.getElementById('examPopup').classList.remove('show');
            
            // 标记部位为已检查
            const bodyPart = document.querySelector(`[data-part="${part}"]`);
            if (bodyPart) {
                bodyPart.classList.add('active');
            }
            
            // 添加检查结果
            addExamResult(displayName, exam);
            
            // 更新进度
            updateProgress();
        }
        
        // 添加检查结果
        function addExamResult(displayName, exam) {
            const resultsContainer = document.getElementById('examResults');
            const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            
            const resultDiv = document.createElement('div');
            resultDiv.className = 'border-l-4 border-green-500 bg-green-50 p-4 rounded';
            resultDiv.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <h4 class="font-medium text-gray-800">
                        <i class="fas fa-${exam.icon} text-green-600 mr-2"></i>
                        ${displayName} - ${exam.name}
                    </h4>
                    <span class="text-xs text-gray-500">${time}</span>
                </div>
                <p class="text-sm text-gray-700">${exam.result}</p>
            `;
            
            resultsContainer.appendChild(resultDiv);
            completedExams.push(exam);
            
            // 隐藏空状态
            document.getElementById('emptyState').classList.add('hidden');
        }
        
        // 更新进度
        function updateProgress() {
            const totalExams = Object.values(examOptions).flat().length;
            const completed = completedExams.length;
            const percentage = (completed / totalExams) * 100;
            
            document.querySelector('.bg-green-500').style.width = percentage + '%';
            document.querySelector('.font-medium').textContent = `${completed}/${totalExams} 项`;
        }
        
        // 点击其他地方关闭弹窗
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.body-part') && !e.target.closest('.exam-popup')) {
                document.getElementById('examPopup').classList.remove('show');
            }
        });
        
        // 常用检查快捷按钮
        document.querySelectorAll('.exam-tag').forEach(btn => {
            btn.addEventListener('click', function() {
                // 这里可以直接执行相应的检查
                const examName = this.textContent.trim();
                addExamResult('快速检查', {
                    name: examName,
                    icon: 'check-circle',
                    result: '检查结果正常'
                });
                updateProgress();
            });
        });
    </script>
</body>
</html>
